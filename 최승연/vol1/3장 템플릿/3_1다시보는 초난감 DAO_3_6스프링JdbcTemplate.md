# 범위
3장 템플릿  

3.1 다시 보는 초난감 DAO   
3.2 변하는 것과 변하지 않는 것  
3.3 JDBC 전략 패턴의 최적화  
3.4 컨텍스트와 DI  
3.5 템플릿과 콜백  
3.6 스프링의 JdbcTemplate  

# WHY
OCP를 잘 지키며, 분리와 확장에 더욱 용이한 코드를 작성해야 한다!

# WHAT: 템플릿/콜백 패턴이 필요하다!
- 코드에서 `변화의 특성이 다른 부분`을 구분해야 한다.
- 각각 다른 목적과 다른 이유에 의해 다른 시점에 독립적으로 변경될 수 있는 효율적인 구조여야 한다.

# HOW
## 템플릿이란?
바뀌는 성질이 아래 부분으로부터 독립시켜서 효과적으로 활용하는 방법
- 다른 코드 중에서 변경이 거의 일어나지 않음
- 일정한 패턴으로 유지되는 특성을 가짐

## 템플릿 메소드 패턴
상속을 통해 기능을 확장해서 사용하는 방법
- 변하지 않는 부분 -> 슈퍼 클래스
- 변하는 부분 -> 추상 메소드로 정의
### 단점
1. `변하는 부분`이 추가될 경우, 상속 클래스를 매번 추가해야 한다.
1. 확장구조가 이미 클래스를 설계하는 시점에서 고정된다. 컴파일 시점에 관계가 결정되기 때문에, 관계에 대한 유연성이 떨어진다. 

## 전략 패턴
오브젝트를 둘로 분리하여, 클래스 레벨에서는 인터페이스를 통해서만 의존하도록 만드는 전략 패턴
- 변하지 않는 부분 -> context클래스의 contextMethod()  // contextMethod()는 내부에서 전략을 취함. 
- 변하는 부분 -> 별도의 클래스로 만들어 추상화된 인터페이스를 통해 위임하는 방식
### 개발스킬
로컬 클래스, 익멍 내부 클래스를 통해 `전략`에 해당하는 구현체를 개발할 수 있음.
### 장점
1. 런타임시에 다이내믹하게 DI됨(클라이언트가 컨텍스트가 사용할 전략을 정해서 전달)

## 템플릿/콜백 패턴
전략패턴의 기본구조에 익명 내부 클래스를 활용한 방식
- 전략패턴의 컨텍스트 -> 템플릿
- 전략패턴의 익명 내부 클래스로 만들어지는 오브젝트 -> 콜백

### 템플릿 콜백 패턴 적용 전 체크리스트
1. 복잡하지만 바뀌지 않느 일정한 패턴을 갖는 작업 흐름이 존재하는가?
1. 그중 일부분만 자주 바꿔서 사용해야 하는가?
1. 즉, 변하지 않고 && 많은 곳에서 중복되는 코드와 로직이 있는가?

### 특징 
- 여러 개의 메소드를 가진 일반적인 인터페이스를 사용할 수 있는 전략 패턴의 전략과 달리 단일 메소드 인터페이스 사용
- 하나의 템플릿에서 여러 전략을 사용해야 하면, 하나 이상의 콜백 오브젝트를 사용할 수 있음.
- 클라이언트와 콜백이 강하게 결합됨

### 스프링에서 이 패턴이 적용된 예시
JDBC 코드 작성을 위해 `JdbcTemplate` 을 기반으로 다양한 템플릿과 콜백 제공

# 기타(키워드)
- OCP(개방폐쇄원칙)
  - 코드에 2가지 성질이 있음을 말해줌. 1) 변경을 통해 그 기능이 다양해지고 확장하려는 성질 2) 고정되어 있고 변하지 않으려는 성질
